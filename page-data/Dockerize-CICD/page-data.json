{"componentChunkName":"component---src-templates-blog-post-js","path":"/Dockerize-CICD/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"6327ccae-273c-5ca3-bff7-6c1334eb6d02","excerpt":"Hey welcome back to my blog, this time we going to learn about containers, Docker and we going to reuse the Github Actions knowledge.  What is a container? A…","html":"<p>Hey welcome back to my blog, this time we going to learn about containers, Docker and we going to reuse the Github Actions knowledge. </p>\n<h2>What is a container?</h2>\n<p>A container is a standard unit of software that packages up code and all its dependencies so the application runs quickly and reliably from one computing environment to another. A Docker container image is a lightweight, standalone, executable package of software that includes everything needed to run an application: code, runtime, system tools, system libraries and settings.</p>\n<p>Container images become containers at runtime and in the case of Docker containers – images become containers when they run on Docker Engine. Available for both Linux and Windows-based applications, containerized software will always run the same, regardless of the infrastructure. Containers isolate software from its environment and ensure that it works uniformly despite differences for instance between development and staging.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fc8617e7db19a1ffc2b0df5991e8d894/9050f/containers.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAgADBP/EABYBAQEBAAAAAAAAAAAAAAAAAAABA//aAAwDAQACEAMQAAABfPm0UJp//8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEDEhExQ//aAAgBAQABBQKSdsuy2Rb5n//EABoRAAICAwAAAAAAAAAAAAAAAAACAxEUIVH/2gAIAQMBAT8Bipm2Yi9P/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAECE//aAAgBAgEBPwGm1Jqf/8QAGRAAAgMBAAAAAAAAAAAAAAAAACEBEDFx/9oACAEBAAY/AlnBmk3/AP/EABsQAQACAgMAAAAAAAAAAAAAAAEAERAhQVFh/9oACAEBAAE/IeCdrjSi9JcXplgsn//aAAwDAQACAAMAAAAQa9//xAAaEQACAgMAAAAAAAAAAAAAAAAAAREhYeHx/9oACAEDAQE/EEagozY+TZ//xAAZEQEAAgMAAAAAAAAAAAAAAAABABEhkfD/2gAIAQIBAT8QFt6xL8s//8QAGxABAQEAAwEBAAAAAAAAAAAAAREAMUFRIfD/2gAIAQEAAT8QipYoC7wCR4+nWBJUWMwOP3AT+9wApd//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Containers\"\n        title=\"Containers\"\n        src=\"/static/fc8617e7db19a1ffc2b0df5991e8d894/828fb/containers.jpg\"\n        srcset=\"/static/fc8617e7db19a1ffc2b0df5991e8d894/ff44c/containers.jpg 158w,\n/static/fc8617e7db19a1ffc2b0df5991e8d894/a6688/containers.jpg 315w,\n/static/fc8617e7db19a1ffc2b0df5991e8d894/828fb/containers.jpg 630w,\n/static/fc8617e7db19a1ffc2b0df5991e8d894/9050f/containers.jpg 686w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Diferences between Containers and VMs</h2>\n<p>Containers and virtual machines have similar resource isolation and allocation benefits, but function differently because containers virtualize the operating system instead of hardware. Containers are more portable and efficient.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/22a6b49bdf6d2770765a682697bfdc31/faddd/container-vms.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.632911392405056%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAdOsnQqIFf/EABgQAQEBAQEAAAAAAAAAAAAAAAECAwAS/9oACAEBAAEFAr0ZqqJ6a9GkjWgPZgT/AP/EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/Aaf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGH/8QAGBABAQEBAQAAAAAAAAAAAAAAAQARIRD/2gAIAQEABj8CTY8eEaXL/8QAGhABAAIDAQAAAAAAAAAAAAAAAQBBESFhcf/aAAgBAQABPyGojnJtVkLIRKWfJpI4LJiADdT/2gAMAwEAAgADAAAAECTv/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAwEBPxAXdh0v/8QAFxEBAQEBAAAAAAAAAAAAAAAAEQEAIf/aAAgBAgEBPxCqQwc3/8QAGxABAQEAAwEBAAAAAAAAAAAAAREAITFRQfD/2gAIAQEAAT8QMQAdfj7okI2oZ3zAznJSAVQvW865BnWVBaYJ5v/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Container-vs-vms\"\n        title=\"Container-vs-vms\"\n        src=\"/static/22a6b49bdf6d2770765a682697bfdc31/828fb/container-vms.jpg\"\n        srcset=\"/static/22a6b49bdf6d2770765a682697bfdc31/ff44c/container-vms.jpg 158w,\n/static/22a6b49bdf6d2770765a682697bfdc31/a6688/container-vms.jpg 315w,\n/static/22a6b49bdf6d2770765a682697bfdc31/828fb/container-vms.jpg 630w,\n/static/22a6b49bdf6d2770765a682697bfdc31/faddd/container-vms.jpg 850w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>The famous Dockerfile</h2>\n<p>Docker can build images automatically by reading the instructions from a Dockerfile. A Dockerfile is a text document that contains all the commands a user could call on the command line to assemble an image. Using docker build users can create an automated build that executes several command-line instructions in succession. This file is formated in YAML.</p>\n<p>The advantage of a Dockerfile over just storing the binary image (or a snapshot/template in other virtualization systems) is that the automatic builds will ensure you have the latest version available. This is a good thing from a security perspective, as you want to ensure you’re not installing any vulnerable software.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3932d4ea4b2d3605fba3fc91ec741574/2cefc/dockerfile.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABA0lEQVQY03WQu07DMBSG/Tq8BQ/ABiOvxdgBBANMqCuKyli1Q4tUUJBIUhXihJbYaS6Ob8fBTdOitOIsvv3ff3x+VHfLGFP/X9C8wk6D7C5Ys3dS4oI3cMfl2Au0qg20MNcw+8lnUfLgYq5NWRSMMQDwv+l4vnzDlFVcSZnlhbXqu4szx7uaBFseWWfHiy7vBzdTX4DJs4ymqe3ouJ+nvae7ybyquBBilZBa8YvHIeqNTq6flZIbWBkzxGQa03FMS6X3fw7J+hUnIcmFkPs5BwE+749uXz42GgvbhQkZLVdpyQ6mjcOvbYe/S4DQ92TVKtEuH2i8OrFrDQd52bOQSkEb2C8RroyLNYGnhAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dockerfile\"\n        title=\"Dockerfile\"\n        src=\"/static/3932d4ea4b2d3605fba3fc91ec741574/f058b/dockerfile.png\"\n        srcset=\"/static/3932d4ea4b2d3605fba3fc91ec741574/c26ae/dockerfile.png 158w,\n/static/3932d4ea4b2d3605fba3fc91ec741574/6bdcf/dockerfile.png 315w,\n/static/3932d4ea4b2d3605fba3fc91ec741574/f058b/dockerfile.png 630w,\n/static/3932d4ea4b2d3605fba3fc91ec741574/40601/dockerfile.png 945w,\n/static/3932d4ea4b2d3605fba3fc91ec741574/78612/dockerfile.png 1260w,\n/static/3932d4ea4b2d3605fba3fc91ec741574/2cefc/dockerfile.png 1400w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Docker Hub</h2>\n<p>Docker Hub is a service provided by Docker for finding and sharing container images with your team. It is the world’s largest repository of container images with an array of content sources including container community developers, open source projects and independent software vendors (ISV) building and distributing their code in containers.</p>\n<p>Users get access to free public repositories for storing and sharing images or can choose a subscription plan for private repositories.</p>\n<p>The best part of Dockerhub is that you can deploy your Docker images from Docker Hub very easy only calling the Image from the repo at the moment of deploy a container.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 348px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/129df277f1cc3c379b951c929c360b3e/34ea4/dockerhub.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.77215189873418%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABRklEQVQY05VRTUvDQBTMH1PRpGnVIhJFqaJVUZR68CDob/CqWDdNU9tabaMlBD/OPShI22vx5E12N5sEbNSKp8bXrJXeRBgew76dfTtvBDlDAFGNcPIvCNEMiah49ARH4IkQcr/+LRYRHtfI3q2XMt3hNBYRGUMYIKkEWhIiABGFXIUxRA4r8J44rtN802+8fBWb71ars3vtLZfZ+qUzkSUL5/bGlTOpU6VgzxXtRMmeylFQKgU6U6DwU2HbdIMg6HahBDdPnTWDZet+rvF2eN8+qL3qdR89+lbrY//OS5ZZynS2qgB3x3KnT6kA0+Fe7fnz6KHNnawYzuIFWyqzVYPNn9nJCtusOjGtt9R4jiZKTMnT2aINZgWYDlZH0njoGHMxGBZD27BFSf0hvAWXwb/065nnBIj10+Kx8UNZCyMYCDI6EMo3Hb4tgagANOIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dockerhub\"\n        title=\"Dockerhub\"\n        src=\"/static/129df277f1cc3c379b951c929c360b3e/34ea4/dockerhub.png\"\n        srcset=\"/static/129df277f1cc3c379b951c929c360b3e/c26ae/dockerhub.png 158w,\n/static/129df277f1cc3c379b951c929c360b3e/6bdcf/dockerhub.png 315w,\n/static/129df277f1cc3c379b951c929c360b3e/34ea4/dockerhub.png 348w\"\n        sizes=\"(max-width: 348px) 100vw, 348px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>The process</h2>\n<p>In this challenge i need to deploy a Frontend running in Nginx using a Dockerfile and create a pipeline for post the Docker image to DockerHub.</p>\n<blockquote>\n<p>1st step:</p>\n</blockquote>\n<p>Create the repository in Github  <a href=\"https://pages.github.com/\">GitHub Pages</a>.</p>\n<blockquote>\n<p>2nd step:</p>\n</blockquote>\n<p>Build the docker file</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token constant\">FROM</span> nginx<span class=\"token operator\">:</span>alpine\n<span class=\"token constant\">LABEL</span> maintainer<span class=\"token operator\">=</span><span class=\"token string\">\"xKingrd\"</span>\n<span class=\"token constant\">ADD</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>images <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>share<span class=\"token operator\">/</span>nginx<span class=\"token operator\">/</span>html<span class=\"token operator\">/</span>images\n<span class=\"token constant\">ADD</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>css <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>share<span class=\"token operator\">/</span>nginx<span class=\"token operator\">/</span>html<span class=\"token operator\">/</span>css\n<span class=\"token constant\">COPY</span> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>index<span class=\"token punctuation\">.</span>html <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>share<span class=\"token operator\">/</span>nginx<span class=\"token operator\">/</span>html<span class=\"token operator\">/</span>\n<span class=\"token constant\">EXPOSE</span> <span class=\"token number\">80</span>\n<span class=\"token constant\">EXPOSE</span> <span class=\"token number\">443</span>\n<span class=\"token constant\">ENTRYPOINT</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"nginx\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-g\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"daemon off;\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>The images, css and all the files are on my github repo.</p>\n<blockquote>\n<p>3rd step:</p>\n</blockquote>\n<p>Create the CI Pipeline</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">name<span class=\"token operator\">:</span> ci\n\non<span class=\"token operator\">:</span>\n  push<span class=\"token operator\">:</span>\n    branches<span class=\"token operator\">:</span>\n      <span class=\"token operator\">-</span> <span class=\"token string\">'main'</span>\n\n\njobs<span class=\"token operator\">:</span>\n  docker<span class=\"token operator\">:</span>\n    runs<span class=\"token operator\">-</span>on<span class=\"token operator\">:</span> ubuntu<span class=\"token operator\">-</span>latest\n    steps<span class=\"token operator\">:</span>\n      <span class=\"token operator\">-</span>\n        name<span class=\"token operator\">:</span> Checkout\n        uses<span class=\"token operator\">:</span> actions<span class=\"token operator\">/</span>checkout@v2\n      <span class=\"token operator\">-</span>\n        name<span class=\"token operator\">:</span> Set up <span class=\"token constant\">QEMU</span>\n        uses<span class=\"token operator\">:</span> docker<span class=\"token operator\">/</span>setup<span class=\"token operator\">-</span>qemu<span class=\"token operator\">-</span>action@v2\n      <span class=\"token operator\">-</span>\n        name<span class=\"token operator\">:</span> Set up Docker Buildx\n        uses<span class=\"token operator\">:</span> docker<span class=\"token operator\">/</span>setup<span class=\"token operator\">-</span>buildx<span class=\"token operator\">-</span>action@v2\n      <span class=\"token operator\">-</span>\n        name<span class=\"token operator\">:</span> What\n        run<span class=\"token operator\">:</span> echo <span class=\"token string\">\"ATTEMPT=${GITHUB_RUN_NUMBER}\"</span> <span class=\"token operator\">>></span> $<span class=\"token constant\">GITHUB_ENV</span>\n      <span class=\"token operator\">-</span>\n        name<span class=\"token operator\">:</span> Login to DockerHub\n        uses<span class=\"token operator\">:</span> docker<span class=\"token operator\">/</span>login<span class=\"token operator\">-</span>action@v2\n        <span class=\"token keyword\">with</span><span class=\"token operator\">:</span>\n          username<span class=\"token operator\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets<span class=\"token punctuation\">.</span><span class=\"token constant\">DOCKERHUB_USERNAME</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          password<span class=\"token operator\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets<span class=\"token punctuation\">.</span><span class=\"token constant\">DOCKERHUB_TOKEN</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">-</span>\n        name<span class=\"token operator\">:</span> Build and push\n        uses<span class=\"token operator\">:</span> docker<span class=\"token operator\">/</span>build<span class=\"token operator\">-</span>push<span class=\"token operator\">-</span>action@v3\n        <span class=\"token keyword\">with</span><span class=\"token operator\">:</span>\n          context<span class=\"token operator\">:</span> <span class=\"token punctuation\">.</span>\n          push<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n          tags<span class=\"token operator\">:</span> xkingrd<span class=\"token operator\">/</span>littlelink<span class=\"token operator\">:</span>v$<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> env<span class=\"token punctuation\">.</span><span class=\"token constant\">ATTEMPT</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>The username and password are storage in the repo secrets in Github, the ATTEMPT variable generate the version number for the image at the moment of the build and upload process.</p>\n<h2>My Opinion</h2>\n<p>This challenge was more easy in my opinion, Github Actions keeps been useful very easy to use. In this project i found a Docker oficial Actions on Github Actions using this oficial action i feel more save about my data.</p>\n<p>Dockerhub works very good and with the versioning of the images, helps to keep a very clean and trasable view of the image history.</p>","frontmatter":{"title":"Containers?? What's that?","date":"May 21, 2022","description":"What is containers using Docker for a very good example by Racosta."}},"previous":{"fields":{"slug":"/CICD/"},"frontmatter":{"title":"How easy is CI/CD with Github Actions"}},"next":null},"pageContext":{"id":"6327ccae-273c-5ca3-bff7-6c1334eb6d02","previousPostId":"b88d3fd5-3a38-5eef-a9a1-fac7dd8cd3ca","nextPostId":null}},"staticQueryHashes":["2841359383","3257411868"]}